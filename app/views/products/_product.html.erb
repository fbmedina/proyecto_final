<div class="row"></div>
<% @products.each do |product| %>

  <div class="col-4 col-offset-1 no-padding">
    <%= link_to image_tag(product.photo), [product.store, product], class: "under" %>
    <div class="col-2 col-offset-1 icon-store-overlaying">
      <% if params[:controller] != 'stores' %>
        <a href="<%= store_path product.store %>">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" enable-background="new 0 0 100 100">
            <path class="white" d="M99.9 42.5c-4.7-11.4-9.4-28.6-14.1-40.5-.5-1.2-1.6-2-2.8-2h-66c-1.2 0-2.3.8-2.8 2-4.6 11.8-9.3 29.1-14 40.5-.1.2-.2.5-.2.8v5.8c0 2.6 1.6 4.8 4 5.5 1.2.3 2.5.3 3.6-.2v42.5c0 1.7 1.3 3.2 3 3.2h44.1v-25.3c0-1.7 1.3-3.2 3-3.2h17c1.7 0 3 1.4 3 3.2v25.2h11c1.7 0 3-1.4 3-3.2v-42.4c1.3.5 2.7.6 4 .3 2.4-.6 4.1-2.9 4.2-5.5l.1-6c0-.3 0-.5-.1-.7zm-83.6 12.4c-2.9-.2-5.1-2.7-5.2-5.7v-5.6c0-.3.1-.6.2-.9 3.6-9.1 7.2-24.5 10.8-33.5.1-.3.3-.5.6-.6h8.4l-2.3 13.9-6.2 20c-.2.7-.3 1.5-.3 2.3-.1 1.8.1 3.5-.1 5.3-.4 2.9-3 5.1-5.9 4.8zm21.7 22.4c0 1.7-1.3 3.2-3 3.2h-10c-1.7 0-3-1.4-3-3.2v-10.5c0-1.7 1.3-3.2 3-3.2h10c1.7 0 3 1.4 3 3.2v10.5zm8.4-55.9l-1.2 15.9c-.3 4-.6 7.9-.6 11.9 0 3.1-2.5 5.7-5.5 5.7h-.2c-3-.1-5.4-2.7-5.4-5.9-.1-4.1.3-8.3 1-12.3l2.9-18.6.4-9c.1-.2.2-.4.4-.4h8.7l-.5 12.7zm20.2 27.5c0 3.2-2.4 5.8-5.4 5.9-3 .1-5.5-2.3-5.7-5.4v-.2c0-4-.3-8-.6-11.9l-1.2-15.9-.4-12.9h8.7c.2.1.3.2.4.4.2.9.3 8.1.4 9 1 6.2 1.9 12.5 2.9 18.6.7 4.2 1 8.3.9 12.4zm17.2 6c-2.9.3-5.5-1.9-5.9-4.9-.2-1.7-.1-3.5-.1-5.3 0-.8-.1-1.5-.3-2.3-2-6.7-4.1-13.3-6.2-20l-2.3-13.9h8.4c.3.1.5.3.6.6 3.6 9.1 7.2 24.5 10.8 33.5.1.3.2.6.2.9v5.6c-.1 3.1-2.4 5.6-5.2 5.8z"/>
          </svg>
        </a>
      <% end %>
    </div>
    <% if params[:controller] != 'stores' %>
      <a href="#" class="button full-size more-margin icon whatsapp"> 
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" enable-background="new 0 0 100 100">
          <path class="white" d="M73.4 58.5c-1.2-.6-7.1-3.5-8.2-3.9-1.1-.4-1.9-.6-2.7.6-.8 1.2-3.1 3.9-3.8 4.7-.7.8-1.4.9-2.6.3-1.2-.6-5.1-1.9-9.7-5.9-3.6-3.2-6-7.1-6.7-8.3s-.1-1.8.5-2.4c.5-.5 1.2-1.4 1.8-2.1s.8-1.2 1.2-2c.4-.8.2-1.5-.1-2.1-.3-.6-2.7-6.5-3.7-8.9-1-2.4-2-2-2.7-2s-1.5-.1-2.3-.1c-.8 0-2.1.3-3.2 1.5s-4.2 4.1-4.2 10 4.3 11.6 4.9 12.3c.6.8 8.3 13.2 20.6 18 12.2 4.8 12.2 3.2 14.4 3 2.2-.2 7.1-2.9 8.1-5.7 1-2.7 1-5.1.7-5.6s-1.1-.8-2.3-1.4zm-22.5-58.5c-27.1 0-49.1 21.8-49 48.7 0 9.3 2.5 17.9 7 25.2l-8.9 26.1 27.2-8.7c7 3.9 15.1 6.1 23.7 6.1 27.1 0 49.1-21.8 49.1-48.7 0-26.9-22-48.7-49.1-48.7zm0 89.8c-8.4 0-16.2-2.5-22.7-6.8l-15.9 5 5.2-15.2c-5-6.7-7.9-15-7.9-24 0-22.6 18.5-41 41.3-41 22.8 0 41.3 18.4 41.3 41s-18.5 41-41.3 41z"/>
        </svg>
        <%= product.store.phone_number %>
      </a>
    <% end %>
  </div>

  <div class="col-6 no-top-padding no-bottom-padding">
    <h2><%= link_to product.name, [product.store, product] %></h2>
    <h3>$<%= product.price %></h3>
    <p><%= product.description %></p>
    <p class="align-right">
      <% product.tags.each do |tag| %>
        #<%= tag %>
      <% end %>
    </p>

    <% if can? :edit, product %>
      <p class="align-right">
        <%= link_to image_tag("gear.svg"), edit_store_product_path(product.store, product), class: "icon" %>
        <%= link_to image_tag("garbage.svg"), [product.store, product], class: "icon", method: :delete, data: { confirm: 'Are you sure?' }%>
      </p>
    <% end %>
  </div>

  <div class="col-6 col-offset-3">
    <% @user_wishlists.each do |user_wishlist| %>
      <div class="col-4 half-padding">
      <% if user_wishlist.products.include? product %>
        <%= link_to image_tag(user_wishlist.wishlist.icon), remove_from_user_wishlist_path(user_wishlist, product), method: :delete, class: "selected" %>
      <% else %>
        <%= link_to image_tag(user_wishlist.wishlist.icon), add_to_user_wishlist_path(user_wishlist, product), method: :post, class: "unselected" %>
      <% end %>
      </div>
    <% end %>
  </div>
  <%= render partial: "shared/little_linebreak" %>
<% end %>